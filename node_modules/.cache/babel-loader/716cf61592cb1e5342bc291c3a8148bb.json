{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/ighmaz/Desktop/keeper-part-3-completed/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport { useRef as b, useEffect as L } from \"react\";\nimport { Keys as v } from \"../components/keyboard.js\";\nimport { focusElement as o, focusIn as H, Focus as T, FocusResult as R } from \"../utils/focus-management.js\";\nimport { useEventListener as d } from \"./use-event-listener.js\";\nimport { useIsMounted as i } from \"./use-is-mounted.js\";\nimport { useOwnerDocument as O } from \"./use-owner.js\";\n\nvar j = function (r) {\n  return r[r.None = 1] = \"None\", r[r.InitialFocus = 2] = \"InitialFocus\", r[r.TabLock = 4] = \"TabLock\", r[r.FocusLock = 8] = \"FocusLock\", r[r.RestoreFocus = 16] = \"RestoreFocus\", r[r.All = 30] = \"All\", r;\n}(j || {});\n\nfunction B(u) {\n  var f = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 30;\n\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      t = _ref.initialFocus,\n      s = _ref.containers;\n\n  var m = b(null),\n      c = b(null),\n      r = i(),\n      M = Boolean(f & 16),\n      a = Boolean(f & 2),\n      e = O(u);\n  return L(function () {\n    !M || m.current || (m.current = e == null ? void 0 : e.activeElement);\n  }, [M, e]), L(function () {\n    if (!!M) return function () {\n      o(m.current), m.current = null;\n    };\n  }, [M]), L(function () {\n    if (!a) return;\n    var l = u.current;\n    if (!l) return;\n    var n = e == null ? void 0 : e.activeElement;\n\n    if (t != null && t.current) {\n      if ((t == null ? void 0 : t.current) === n) {\n        c.current = n;\n        return;\n      }\n    } else if (l.contains(n)) {\n      c.current = n;\n      return;\n    }\n\n    t != null && t.current ? o(t.current) : H(l, T.First) === R.Error && console.warn(\"There are no focusable elements inside the <FocusTrap />\"), c.current = e == null ? void 0 : e.activeElement;\n  }, [u, t, a, e]), d(e == null ? void 0 : e.defaultView, \"keydown\", function (l) {\n    !(f & 4) || !u.current || l.key === v.Tab && (l.preventDefault(), H(u.current, (l.shiftKey ? T.Previous : T.Next) | T.WrapAround) === R.Success && (c.current = e == null ? void 0 : e.activeElement));\n  }), d(e == null ? void 0 : e.defaultView, \"focus\", function (l) {\n    if (!(f & 8)) return;\n    var n = new Set(s == null ? void 0 : s.current);\n    if (n.add(u), !n.size) return;\n    var p = c.current;\n    if (!p || !r.current) return;\n    var E = l.target;\n    E && E instanceof HTMLElement ? k(n, E) ? (c.current = E, o(E)) : (l.preventDefault(), l.stopPropagation(), o(p)) : o(c.current);\n  }, !0), m;\n}\n\nfunction k(u, f) {\n  var t;\n\n  var _iterator = _createForOfIteratorHelper(u),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var s = _step.value;\n      if ((t = s.current) != null && t.contains(f)) return !0;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return !1;\n}\n\nexport { j as Features, B as useFocusTrap };","map":null,"metadata":{},"sourceType":"module"}